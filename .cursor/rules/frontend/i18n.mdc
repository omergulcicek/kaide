---
description: "USE WHEN: Implementing internationalization, translating content, and managing localization keys."
globs: "src/messages/**/*.json,src/i18n/**/*.{ts,tsx},src/features/**/index.ts"
alwaysApply: false
---

# Internationalization (i18n)

## Constraints

- **Library:** Use `next-intl` for Next.js, `paraglide-js` for TanStack.
- **Keys:** Use type-safe keys. Magic strings are forbidden.
- **Structure:** Use namespaces for large features (`profile.settings`).
- **Components:** Pass translated text to child components.
- **Pluralization:** Use the library's native pluralization features.

## Bans

- Hardcoded strings in UI.
- Dynamic key generation (`"auth." + key`).
- Reading locale via `window.location`.
- JSON hierarchy deeper than 3 levels.
- Async translation loading (causes Layout shift).

## Correct Implementation

<example>
```tsx
const t = useTranslations("auth");
return <button>{t("login")}</button>;
```
</example>

## Incorrect Implementation

<incorrect-example>
```tsx
return <button>Login</button>;
const label = t("welcome_" + type);
```
</incorrect-example>
